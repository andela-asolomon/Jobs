var KlaviyoSubscribe=KlaviyoSubscribe||{};
(function(){if(!KlaviyoSubscribe._loaded){KlaviyoSubscribe._loaded=!0;var h={"modal.html":'<div class="klaviyo_modal" style="display:none;"><div class="klaviyo_inner"><a href="#" class="klaviyo_close_modal klaviyo_header_close">&times;</a><form action="" method="POST" novalidate="novalidate" class="klaviyo_subscription_form"><input type="hidden" name="g" value="" /><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_fieldset"></div><div class="klaviyo_fine_print"></div><div class="klaviyo_form_actions"><button type="submit" class="klaviyo_submit_button"><span></span></button></div><div class="klaviyo_below_submit"></div></form><div class="error_message" style="display:none;"></div><div class="success_message" style="display:none;"></div></div></div>',"flyout.html":'<div class="klaviyo_flyout" style="display:none;"><div class="klaviyo_inner"><div class="klaviyo_topbar" /><a href="#" class="klaviyo_close_flyout klaviyo_header_close">&times;</a><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_flyout_action"><a href="#"><span /> &raquo;</a></div></div></div>',
"flyout_form.html":'<div class="klaviyo_flyout" style="display:none;"><div class="klaviyo_inner"><div class="klaviyo_topbar" /><a href="#" class="klaviyo_close_flyout klaviyo_header_close">&times;</a><form action="" method="POST" novalidate="novalidate" class="klaviyo_subscription_form"><input type="hidden" name="g" value="" /><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_inline_fieldset"><input type="email" name="email" placeholder="Your email address" /><button type="submit" class="klaviyo_submit_button"><span></span></button></div></form><div class="success_message" style="display:none;"></div></div></div>'},
m={$email:"Email Address",$first_name:"First Name",$last_name:"Last Name"};KlaviyoSubscribe._debug=-1<document.location.hash.indexOf("#test");KlaviyoSubscribe.has_called_bootstrap=!1;KlaviyoSubscribe.is_requirements_loaded=!1;KlaviyoSubscribe.bootstrap_queue=[];KlaviyoSubscribe.bootstrap_attempts=0;KlaviyoSubscribe.instances={};KlaviyoSubscribe.isDebugMode=function(){return KlaviyoSubscribe._debug};KlaviyoSubscribe.bootstrap=function(a){KlaviyoSubscribe.has_called_bootstrap||(KlaviyoSubscribe.has_called_bootstrap=
!0,KlaviyoSubscribe.loadCss("//a.klaviyo.com/media/css/public/klaviyo_subscribe.css"),KlaviyoSubscribe.fetchRequirements(a))};KlaviyoSubscribe.loadScript=function(a,b,c){var e=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.src=a;e.appendChild(d);KlaviyoSubscribe.log("Loaded JS",a);KlaviyoSubscribe.whenTrue(b,c)};KlaviyoSubscribe.loadCss=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.rel="stylesheet";
c.type="text/css";c.href=a;b.appendChild(c);KlaviyoSubscribe.log("Loaded CSS",a)};KlaviyoSubscribe.injectCSS=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));b.appendChild(c)};KlaviyoSubscribe.whenTrue=function(a,b){var c=0,e=function(){a()?b():(c++,100>c&&setTimeout(e,200))};e()};KlaviyoSubscribe.loadJQuery=function(a){KlaviyoSubscribe.loadScript("//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js",
function(){return!!window.jQuery},a)};KlaviyoSubscribe.loadJQueryForm=function(a){KlaviyoSubscribe.loadScript("//cdnjs.cloudflare.com/ajax/libs/jquery.form/3.32/jquery.form.js",function(){return!!window.jQuery&&jQuery.fn.ajaxForm&&jQuery.fn.formSerialize},a)};KlaviyoSubscribe.fetchRequirements=function(a){document.getElementsByTagName("head");a=a||{};if(window.jQuery)jQuery.fn.ajaxForm?KlaviyoSubscribe.processQueue():KlaviyoSubscribe.loadJQueryForm(KlaviyoSubscribe.processQueue);else{var b=function(){KlaviyoSubscribe.log("jQuery loaded.");
KlaviyoSubscribe.loadJQueryForm(KlaviyoSubscribe.processQueue)};!0===a.assume_jquery?KlaviyoSubscribe.whenTrue(function(){return!!window.jQuery},b):KlaviyoSubscribe.loadJQuery(b)}};KlaviyoSubscribe.processQueue=function(){var a;KlaviyoSubscribe.log("Waiting for DOM to process queue.");jQuery(function(){for(KlaviyoSubscribe.log("Processing queue.");a=KlaviyoSubscribe.bootstrap_queue.shift();)a();KlaviyoSubscribe.bootstrap_queue.push=function(a){a()}})};KlaviyoSubscribe.executeWhenRequirementsLoaded=
function(a){KlaviyoSubscribe.bootstrap_queue.push(a)};KlaviyoSubscribe.attachToForms=function(a,b){var b=b||{},c=b.extra_properties||{};KlaviyoSubscribe.bootstrap();KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){KlaviyoSubscribe.log("Attaching to forms",a,jQuery(a).length);jQuery(a).each(function(){var a=jQuery(this),d=a.data("ajax-submit");d||(d="//manage.kmail-lists.com/ajax/subscriptions/subscribe");a.ajaxForm({url:d,type:"POST",beforeSubmit:function(b,i,d){if(!KlaviyoSubscribe.isFormValid(a))return!1;
KlaviyoSubscribe.normalizeFormFields(b,a,c,d);a.find(".klaviyo_submit_button").attr("disabled",!0)},success:function(c){a.find(".success_message, .error_message").hide();a.find(".klaviyo_submit_button").attr("disabled",!1);if(c.success)if(c=a.find(".success_message").show(),c.length||(c=a.parent().find(".success_message").show()),b.success_url)window.location=b.success_url;else{!0!==b.custom_success_message&&c.html(b.success_message||'<div class="klaviyo_header">Thanks for subscribing!</div><div class="klaviyo_subheader">Check your email for a confirmation message.</div>').end();
!0===b.hide_form_on_success&&(a.find(".klaviyo_field_group input, .klaviyo_form_actions").hide(),a.is(".klaviyo_horizontal_form")&&a.find(".klaviyo_field_group").hide());b.success&&b.success(a);if(window._learnq&&_learnq.push&&(c=a.find('[name="email"]').val()))_learnq.push(["identify",{$email:c}]),_learnq.push(["trackActivity"]);a.trigger("klaviyo.subscribe.success").resetForm()}else KlaviyoSubscribe.log(c.errors),a.find(".error_message").show().html(c.errors.join(" "))}});KlaviyoSubscribe.log("Attached to form",
this)})})};KlaviyoSubscribe.attachModalSignUp=function(a){a=a||{};a.pages=a.pages||[];a.excluded_pages=a.excluded_pages||[];a.delay_seconds=a.delay_seconds||0.1;a.delay_num_pages=a.delay_num_pages||0;a.content=a.content||{};a.extra_properties=a.extra_properties||{};a.list&&(KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var b=KlaviyoSubscribe._buildModalSignUp(a);b.find('[name="g"]').val(a.list);b.appendTo(jQuery("body"));KlaviyoSubscribe.attachToModalForm(b,
{pages:a.pages,delay:a.delay_seconds,delay_num_pages:a.delay_num_pages,custom_success_message:!!a.content.success,extra_properties:a.extra_properties,success:function(b){b.hide();a.success&&a.success(b)}})}))};KlaviyoSubscribe._buildModalSignUp=function(a){var b=a.content;b.fields=b.extra_fields||[];-1===jQuery.inArray("$email",b.fields)&&b.fields.unshift("$email");if(b.element)return jQuery(b.element);var c=jQuery(h["modal.html"]).attr("id","k_id_modal").find(".klaviyo_header").html(b.header||"Interested in our Newsletter?").end().find(".klaviyo_subscription_form").attr("action",
a.subscribe_url||"//manage.kmail-lists.com/subscriptions/subscribe").data("ajax-submit",a.ajax_subscribe_url||"//manage.kmail-lists.com/ajax/subscriptions/subscribe").end().find(".klaviyo_submit_button span").html(b.button||"Subscribe").end();b.clazz&&c.addClass(b.clazz);b.styles&&KlaviyoSubscribe.injectCSS(b.styles);!1!==b.subheader&&c.find(".klaviyo_subheader").html(b.subheader||"Stay in the know with news and promotions.");b.below_submit?c.find(".klaviyo_below_submit").html(b.below_submit):c.find(".klaviyo_below_submit").hide();
b.success&&c.find(".success_message").html(b.success);!0===a.ack&&c.append(jQuery('<div class="klaviyo_ack"><a href="http://www.klaviyo.com/?utm_campaign=pbk">Powered by Klaviyo</a></div>'));var e=c.find(".klaviyo_fieldset");jQuery.each(b.fields,function(a,b){"string"===typeof b&&(b={name:b});b.type||(b.type="$email"===b.name?"email":"text");b.label||(b.label=m[b.name]||b.name);var c="k_id_modal_"+b.name;e.append(jQuery('<div class="klaviyo_field_group" />').append(jQuery("<label />").attr("for",
c).html(b.label)).append(jQuery("<input />").attr({type:b.type,id:c,name:"$"===b.name[0]?b.name.slice(1):b.name})))});a=b.fine_print||"";b.email_frequency&&(a+=" Our newsletter is delivered to your inbox "+b.email_frequency+".");c.find(".klaviyo_fine_print").html(a);return c};KlaviyoSubscribe.attachToModalForm=function(a,b){b=b||{};b.pages=b.pages||[];b.excluded_pages=b.excluded_pages||[];b.extra_properties=b.extra_properties||{};KlaviyoSubscribe.attachToForms(jQuery(a).find(".klaviyo_subscription_form"),
b);KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var c=jQuery(a);c.delegate(".klaviyo_close_modal","click",function(a){a.preventDefault();c.hide();KlaviyoSubscribe.setClosedModalCookie()});c.click(function(a){a.currentTarget===a.target&&(c.hide(),KlaviyoSubscribe.setClosedModalCookie())});KlaviyoSubscribe._canShowElem(b)&&jQuery(function(){setTimeout(function(){c.fadeIn(1E3)},1E3*(b.delay||2))})})};KlaviyoSubscribe.attachFlyoutSignUp=function(a){a=a||{};a.pages=a.pages||[];a.excluded_pages=
a.excluded_pages||[];a.delay_scroll="undefined"===typeof a.delay_scroll?50:a.delay_scroll;a.delay_seconds=a.delay_seconds||0.1;a.delay_num_pages=a.delay_num_pages||0;a.position=a.position||"right";a.content=a.content||{};a.extra_properties=a.extra_properties||{};"undefined"===typeof a.modal_content&&(a.modal_content=a.content);a.list&&(KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var b=!1===a.modal_content,c=KlaviyoSubscribe._buildFlyoutSignUp(jQuery.extend({include_form:b},
a));c.appendTo(jQuery("body"));b&&(c.find('[name="g"]').val(a.list),KlaviyoSubscribe.attachToForms(c.find(".klaviyo_subscription_form"),jQuery.extend({custom_success_message:!!a.content.success,success:function(b){b.hide();KlaviyoSubscribe.setClosedModalCookie();a.success&&a.success(b)}},a)));KlaviyoSubscribe.attachToFlyout(c,{pages:a.pages,delay:a.delay_seconds,delay_scroll:a.delay_scroll,delay_num_pages:a.delay_num_pages,position:a.position,click:function(){var b=KlaviyoSubscribe._buildModalSignUp({content:a.modal_content});
b.find('[name="g"]').val(a.list);b.appendTo(jQuery("body"));KlaviyoSubscribe.attachToModalForm(b,{delay:0.01,extra_properties:a.extra_properties,success:function(b){b.hide();a.success&&a.success(b)}})}})}))};KlaviyoSubscribe._buildFlyoutSignUp=function(a){var b=a.content;if(b.element)return jQuery(b.element);var c=jQuery(h[a.include_form?"flyout_form.html":"flyout.html"]).attr("id","k_id_flyout").find(".klaviyo_header").html(b.header||"Interested in our Newsletter?").end().find(".klaviyo_subscription_form").attr("action",
a.subscribe_url||"//manage.kmail-lists.com/subscriptions/subscribe").data("ajax-submit",a.ajax_subscribe_url||"//manage.kmail-lists.com/ajax/subscriptions/subscribe").end().find(".klaviyo_flyout_action a span, .klaviyo_submit_button span").html(b.button||"Subscribe").end();c.addClass("klaviyo_"+a.position);b.clazz&&c.addClass(b.clazz);b.styles&&KlaviyoSubscribe.injectCSS(b.styles);!1!==b.subheader&&c.find(".klaviyo_subheader").html(b.subheader||"Stay in the know with news and promotions.");b.success&&
c.find(".success_message").html(b.success);!0===a.ack&&c.find(".klaviyo_inner").append(jQuery('<div class="klaviyo_ack"><a href="http://www.klaviyo.com/?utm_campaign=pbk">Powered by Klaviyo</a></div>'));return c};KlaviyoSubscribe.attachToFlyout=function(a,b){b=b||{};b.pages=b.pages||[];b.excluded_pages=b.excluded_pages||[];b.positon=b.position||"right";KlaviyoSubscribe.bootstrap();KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var c=jQuery(a);c.delegate(".klaviyo_close_flyout","click",
function(a){a.preventDefault();c.hide();KlaviyoSubscribe.setClosedModalCookie()});c.find(".klaviyo_flyout_action a").click(function(a){a.preventDefault();c.hide();b.click&&b.click()});KlaviyoSubscribe._canShowElem(b)&&jQuery(function(){var a=b.delay_scroll,d=function(){c.data("opened")||setTimeout(function(){if(!c.data("opened")){c.data("opened",!0);var a=c.find(".klaviyo_inner"),f="left"===b.position?"left":"right";c.css("visibility","hidden").show();a.css(f,-c.width());c.css("visibility","visible");
var i={};i[f]=0;a.animate(i,1E3*(b.slide_seconds||2))}},1E3*(b.delay||2))};if(!1===a)d();else{var f=jQuery(document),i=jQuery(window),j="bottom"===a?95:a,g=function(){var a=f.height()-i.height();if((0>a?100:100*f.scrollTop()/a)>j)d(),f.unbind("scroll",g)};f.scroll(g);0===a&&jQuery(function(){setTimeout(function(){d()},1E3*(b.delay||2))})}})})};KlaviyoSubscribe.isFormValid=function(a){var b=a.find('[name="email"]').val();if(!b||!/@/.test(b))return!1;var c=!1;a.find('input[required="true"], select[required="true"]').each(function(a,
b){b=jQuery(b);if(!b.val())return KlaviyoSubscribe.log("Required field missing",b.attr("name")),c=!0,!1});if(c)return!1;var e=!1;a.find(".select-date-widget").each(function(a,b){var b=jQuery(b),c=KlaviyoSubscribe._int(b.find('[name$="_day"]').val()),j=KlaviyoSubscribe._int(b.find('[name$="_month"]').val()),g=KlaviyoSubscribe._int(b.find('[name$="_year"]').val());if(!isNaN(c)&&!isNaN(j)&&!isNaN(g)){switch(j){case 1:case 3:case 5:case 7:case 8:case 10:case 12:if(1<=c&&31>=c)return;case 4:case 6:case 9:case 11:if(1<=
c&&30>=c)return;case 2:if(1<=c&&c<=(g%4?28:29))return}KlaviyoSubscribe.log("Invalid date",g,j,c);e=!0;return!1}});return e?!1:!0};KlaviyoSubscribe.normalizeFormFields=function(a,b,c){a.push({name:"$timezone_offset",type:"text",value:this._getUtcOffset()});if(c){var e=[],d;jQuery.each(c,function(b,c){a.push({name:b,type:"text",value:c});e.push(b)});e.length&&(jQuery.each(a,function(a,b){if("$fields"===b.name)return d=b,!1}),d?d.value+=","+e.join():a.push({name:"$fields",type:"text",value:e.join()}))}b.find(".select-date-widget").each(function(b,
c){var c=jQuery(c),d=c.find('[name$="_day"]'),e=c.find('[name$="_month"]'),k=c.find('[name$="_year"]'),h=d.attr("name"),m=e.attr("name"),n=k.attr("name"),d=KlaviyoSubscribe._int(d.val()),e=KlaviyoSubscribe._int(e.val()),k=KlaviyoSubscribe._int(k.val());if(!isNaN(d)&&!isNaN(e)&&!isNaN(k)){for(b=0;b<a.length;){var l=a[b];l&&(l.name===h||l.name===m||l.name===n)?a.splice(b,1):b++}a.push({name:h.replace("_day",""),required:!0,type:"text",value:KlaviyoSubscribe._formatDate(k,e,d)})}})};KlaviyoSubscribe.isCurrentLocationInPatterns=
function(a){for(var b=location.toString(),c=0,e=a.length;c<e;c++)if(KlaviyoSubscribe.patternMatchesUrl(a[c],b))return!0;return!1};KlaviyoSubscribe.patternMatchesUrl=function(a,b){b=b.toLowerCase();if(a===b)return!0;if(-1===a.indexOf("?")){var c=b.indexOf("?");-1!==c&&(b=b.substring(0,c))}if(-1===a.indexOf("*")){a=a.replace(/\/$/,"");""===a&&(a="/");b=b.replace(/\/$/,"");if(a===b)return!0;return 0===a.indexOf("/")?(c=KlaviyoSubscribe.parseDomain(b),""===a?"/"===c:c===a):!1}if(a===b)return!0;if(!a.length)return!1;
c=a.replace(RegExp("[.+?|()\\[\\]{}\\\\]","g"),"\\$&").replace(RegExp("\\*","g"),"(.*?)");c=/\/$/.test(c)?"^"+c+"$":"^"+c+"/?$";c=RegExp(c,"i");return c.test(b)?!0:a.indexOf("/")?!1:c.test(KlaviyoSubscribe.parseDomain(b))};KlaviyoSubscribe.parseDomain=function(a){return"/"+a.split("//")[1].split("/").splice(1).join("/")};KlaviyoSubscribe.incrPageViews=function(){var a=parseInt(KlaviyoSubscribe._getCookie("klaPages"),10);isNaN(a)&&(a=0);a+=1;KlaviyoSubscribe._setCookie("klaPages",a,31536E6);return a};
KlaviyoSubscribe.setClosedModalCookie=function(){KlaviyoSubscribe._setCookie("klaClosedPopup","1",31536E6)};KlaviyoSubscribe.hasClosedModal=function(){return!!KlaviyoSubscribe._getCookie("klaClosedPopup")&&!KlaviyoSubscribe.isDebugMode()};KlaviyoSubscribe._setCookie=function(a,b,c){c=new Date((new Date).getTime()+c);document.cookie=a+"="+b+";expires="+c.toGMTString()+";path=/"};KlaviyoSubscribe._getCookie=function(a){return(a=RegExp("(^|;)[ ]*"+a+"=([^;]*)").exec(document.cookie))?a[2]:""};KlaviyoSubscribe._getUtcOffset=
function(){return(new Date).getTimezoneOffset()/-60};KlaviyoSubscribe._canShowElem=function(a){return a.delay_num_pages&&a.delay_num_pages>KlaviyoSubscribe.incrPageViews()||a.pages.length&&!KlaviyoSubscribe.isCurrentLocationInPatterns(a.pages)||a.excluded_pages.length&&KlaviyoSubscribe.isCurrentLocationInPatterns(a.excluded_pages)?!1:!KlaviyoSubscribe.hasClosedModal()};KlaviyoSubscribe._int=function(a){return parseInt(a,10)};KlaviyoSubscribe._formatDate=function(a,b,c){1===c.toString().length&&(c=
"0"+c);1===b.toString().length&&(b="0"+b);return a+"-"+b+"-"+c};KlaviyoSubscribe.log=function(){window.console&&console.log&&console.log(arguments)}}})();
